{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Container,Typography,TextField,Button,Grid,Paper,Alert,CircularProgress}from'@mui/material';import{useParams,useNavigate}from'react-router-dom';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookingForm(){const{roomId}=useParams();const navigate=useNavigate();const[room,setRoom]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[formData,setFormData]=useState({checkIn:'',checkOut:'',guestName:'',email:'',phone:''});useEffect(()=>{fetchRoomDetails();},[roomId]);const fetchRoomDetails=async()=>{try{const response=await api.getRoom(roomId);setRoom(response.data);}catch(error){setError('Gagal mengambil detail kamar: '+error.message);}finally{setLoading(false);}};const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{setLoading(true);const bookingData={...formData,roomId:roomId,status:'PENDING'};await api.createBooking(bookingData);alert('Pemesanan berhasil!');navigate('/');}catch(error){setError('Gagal membuat pemesanan: '+error.message);}finally{setLoading(false);}};if(loading&&!room){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",sx:{py:4},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:4,fontWeight:'bold'},children:\"Form Pemesanan Kamar\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:4},children:error}),room&&/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Detail Kamar:\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Tipe: \",room.room_type]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Harga: Rp \",room.price,\"/malam\"]})]}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Tanggal Check-in\",type:\"date\",name:\"checkIn\",value:formData.checkIn,onChange:handleChange,InputLabelProps:{shrink:true},required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Tanggal Check-out\",type:\"date\",name:\"checkOut\",value:formData.checkOut,onChange:handleChange,InputLabelProps:{shrink:true},required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Nama Lengkap\",name:\"guestName\",value:formData.guestName,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Nomor Telepon\",name:\"phone\",value:formData.phone,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,size:\"large\",disabled:loading,sx:{py:1.5,backgroundColor:'#1976d2','&:hover':{backgroundColor:'#1565c0'}},children:loading?'MEMPROSES...':'KONFIRMASI PEMESANAN'})})]})})]})});}export default BookingForm;","map":{"version":3,"names":["React","useState","useEffect","Box","Container","Typography","TextField","Button","Grid","Paper","Alert","CircularProgress","useParams","useNavigate","api","jsx","_jsx","jsxs","_jsxs","BookingForm","roomId","navigate","room","setRoom","loading","setLoading","error","setError","formData","setFormData","checkIn","checkOut","guestName","email","phone","fetchRoomDetails","response","getRoom","data","message","handleChange","e","target","name","value","handleSubmit","preventDefault","bookingData","status","createBooking","alert","sx","display","justifyContent","alignItems","minHeight","children","maxWidth","py","elevation","p","variant","mb","fontWeight","severity","room_type","price","component","onSubmit","container","spacing","item","xs","sm","fullWidth","label","type","onChange","InputLabelProps","shrink","required","size","disabled","backgroundColor"],"sources":["C:/Users/USER/Documents/Collage/SEM 6/CC/Tugas/Reservation_Project/frontend/src/pages/Booking/BookingForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Box, Container, Typography, TextField, Button, Grid, Paper, Alert, CircularProgress } from '@mui/material';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../../services/api';\r\n\r\nfunction BookingForm() {\r\n  const { roomId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [room, setRoom] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    checkIn: '',\r\n    checkOut: '',\r\n    guestName: '',\r\n    email: '',\r\n    phone: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchRoomDetails();\r\n  }, [roomId]);\r\n\r\n  const fetchRoomDetails = async () => {\r\n    try {\r\n      const response = await api.getRoom(roomId);\r\n      setRoom(response.data);\r\n    } catch (error) {\r\n      setError('Gagal mengambil detail kamar: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const bookingData = {\r\n        ...formData,\r\n        roomId: roomId,\r\n        status: 'PENDING'\r\n      };\r\n      await api.createBooking(bookingData);\r\n      alert('Pemesanan berhasil!');\r\n      navigate('/');\r\n    } catch (error) {\r\n      setError('Gagal membuat pemesanan: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading && !room) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '100vh' }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n      <Paper elevation={3} sx={{ p: 4 }}>\r\n        <Typography variant=\"h4\" sx={{ mb: 4, fontWeight: 'bold' }}>\r\n          Form Pemesanan Kamar\r\n        </Typography>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 4 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {room && (\r\n          <Box sx={{ mb: 4 }}>\r\n            <Typography variant=\"h6\">Detail Kamar:</Typography>\r\n            <Typography>Tipe: {room.room_type}</Typography>\r\n            <Typography>Harga: Rp {room.price}/malam</Typography>\r\n          </Box>\r\n        )}\r\n\r\n        <Box component=\"form\" onSubmit={handleSubmit}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Tanggal Check-in\"\r\n                type=\"date\"\r\n                name=\"checkIn\"\r\n                value={formData.checkIn}\r\n                onChange={handleChange}\r\n                InputLabelProps={{ shrink: true }}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Tanggal Check-out\"\r\n                type=\"date\"\r\n                name=\"checkOut\"\r\n                value={formData.checkOut}\r\n                onChange={handleChange}\r\n                InputLabelProps={{ shrink: true }}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Nama Lengkap\"\r\n                name=\"guestName\"\r\n                value={formData.guestName}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Email\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Nomor Telepon\"\r\n                name=\"phone\"\r\n                value={formData.phone}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                fullWidth\r\n                size=\"large\"\r\n                disabled={loading}\r\n                sx={{\r\n                  py: 1.5,\r\n                  backgroundColor: '#1976d2',\r\n                  '&:hover': {\r\n                    backgroundColor: '#1565c0'\r\n                  }\r\n                }}\r\n              >\r\n                {loading ? 'MEMPROSES...' : 'KONFIRMASI PEMESANAN'}\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BookingForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}