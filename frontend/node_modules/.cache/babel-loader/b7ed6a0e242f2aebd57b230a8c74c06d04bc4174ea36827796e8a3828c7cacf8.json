{"ast":null,"code":"import{createContext,useContext,useState}from'react';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);export const AuthProvider=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const login=async credentials=>{try{const response=await api.login(credentials);const data=response.data;if(data.user_id&&data.role){setUser({id:data.user_id,role:data.role});setIsAuthenticated(true);return{success:true};}else{return{success:false,error:'Invalid response from server'};}}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed'};}};const logout=async()=>{try{await api.logout();}catch(error){console.error('Logout error:',error);}finally{setUser(null);setIsAuthenticated(false);}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isAuthenticated,user,login,logout},children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};","map":{"version":3,"names":["createContext","useContext","useState","api","jsx","_jsx","AuthContext","AuthProvider","_ref","children","isAuthenticated","setIsAuthenticated","user","setUser","login","credentials","response","data","user_id","role","id","success","error","_error$response","_error$response$data","logout","console","Provider","value","useAuth","context","Error"],"sources":["C:/Users/USER/Documents/Collage/SEM 6/CC/Tugas/Reservation_Project/frontend/src/contexts/AuthContext.jsx"],"sourcesContent":["import { createContext, useContext, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n\r\n    const login = async (credentials) => {\r\n        try {\r\n            const response = await api.login(credentials);\r\n            const data = response.data;\r\n            \r\n            if (data.user_id && data.role) {\r\n                setUser({\r\n                    id: data.user_id,\r\n                    role: data.role\r\n                });\r\n                setIsAuthenticated(true);\r\n                return { success: true };\r\n            } else {\r\n                return { \r\n                    success: false, \r\n                    error: 'Invalid response from server' \r\n                };\r\n            }\r\n        } catch (error) {\r\n            return { \r\n                success: false, \r\n                error: error.response?.data?.error || 'Login failed' \r\n            };\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        try {\r\n            await api.logout();\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        } finally {\r\n            setUser(null);\r\n            setIsAuthenticated(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ \r\n            isAuthenticated, \r\n            user, \r\n            login, \r\n            logout \r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};"],"mappings":"AAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElC,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,IAAI,CAAC,CAEvC,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACU,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAEtC,KAAM,CAAAY,KAAK,CAAG,KAAO,CAAAC,WAAW,EAAK,CACjC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAb,GAAG,CAACW,KAAK,CAACC,WAAW,CAAC,CAC7C,KAAM,CAAAE,IAAI,CAAGD,QAAQ,CAACC,IAAI,CAE1B,GAAIA,IAAI,CAACC,OAAO,EAAID,IAAI,CAACE,IAAI,CAAE,CAC3BN,OAAO,CAAC,CACJO,EAAE,CAAEH,IAAI,CAACC,OAAO,CAChBC,IAAI,CAAEF,IAAI,CAACE,IACf,CAAC,CAAC,CACFR,kBAAkB,CAAC,IAAI,CAAC,CACxB,MAAO,CAAEU,OAAO,CAAE,IAAK,CAAC,CAC5B,CAAC,IAAM,CACH,MAAO,CACHA,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,8BACX,CAAC,CACL,CACJ,CAAE,MAAOA,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CACZ,MAAO,CACHH,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,EAAAC,eAAA,CAAAD,KAAK,CAACN,QAAQ,UAAAO,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBN,IAAI,UAAAO,oBAAA,iBAApBA,oBAAA,CAAsBF,KAAK,GAAI,cAC1C,CAAC,CACL,CACJ,CAAC,CAED,KAAM,CAAAG,MAAM,CAAG,KAAAA,CAAA,GAAY,CACvB,GAAI,CACA,KAAM,CAAAtB,GAAG,CAACsB,MAAM,CAAC,CAAC,CACtB,CAAE,MAAOH,KAAK,CAAE,CACZI,OAAO,CAACJ,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACzC,CAAC,OAAS,CACNT,OAAO,CAAC,IAAI,CAAC,CACbF,kBAAkB,CAAC,KAAK,CAAC,CAC7B,CACJ,CAAC,CAED,mBACIN,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACC,KAAK,CAAE,CACzBlB,eAAe,CACfE,IAAI,CACJE,KAAK,CACLW,MACJ,CAAE,CAAAhB,QAAA,CACGA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED,MAAO,MAAM,CAAAoB,OAAO,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,OAAO,CAAG7B,UAAU,CAACK,WAAW,CAAC,CACvC,GAAI,CAACwB,OAAO,CAAE,CACV,KAAM,IAAI,CAAAC,KAAK,CAAC,6CAA6C,CAAC,CAClE,CACA,MAAO,CAAAD,OAAO,CAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}